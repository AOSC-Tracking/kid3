# SPDX-FileCopyrightText: 2023 Urs Fleisch <ufleisch at users.sourceforge.net>
# SPDX-License-Identifier: CC0-1.0

include:
# Building both Qt5 and Qt6 does not seem to work, probably they build
# concurrently inside the same build folder, only build with Qt6 for now.
#  - https://invent.kde.org/sysadmin/ci-utilities/raw/master/gitlab-templates/linux.yml
  - https://invent.kde.org/sysadmin/ci-utilities/raw/master/gitlab-templates/linux-qt6.yml
#  - https://invent.kde.org/sysadmin/ci-utilities/raw/master/gitlab-templates/freebsd.yml
#  - https://invent.kde.org/sysadmin/ci-utilities/raw/master/gitlab-templates/windows.yml

# Building with Qt6 after Qt5 fails because QUERY_EXECUTABLE is cached to path of Qt5 qmake.
# Building with Qt5 after Qt6 fails because BUILD_WITH_QT6 is cached to ON.
# This could be solved by adding '--fresh' to the cmake-options in .kde-ci.yml.
# However, then the build will fail, e.g. with Qt5 when using moc headers generated by Qt6.
# This could be solved by using 'cmake --build _build --clean-first -- -j' as
# the build command, but it is hard coded to 'make -j 8', so the build folder
# has to be cleaned manually.

suse_tumbleweed_qt515:
  before_script:
    - git clone https://invent.kde.org/sysadmin/ci-utilities
    - git clone https://invent.kde.org/sysadmin/repo-metadata ci-utilities/repo-metadata/
    - rm -rf _build

suse_tumbleweed_qt64:
  before_script:
    - git clone https://invent.kde.org/sysadmin/ci-utilities
    - git clone https://invent.kde.org/sysadmin/repo-metadata ci-utilities/repo-metadata/
    - rm -rf _build
